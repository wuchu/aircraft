(()=>{"use strict";var e={61:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198));class a extends r.default.Sprite{constructor(){super(),this.action=!0,this.initWithSpriteFrameName("background_2.png"),this.setAnchorPoint(r.default.p(0,0))}isActive(){return this.action}destroy(){this.action=!1,this.setVisible(!1)}restore(){this.action=!0}}t.default=a},396:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(61));class n extends r.default.Class{constructor(){super(...arguments),this.pool=new r.default.SimplePool}static getInstance(){return this.instance||(this.instance=new this),this.instance}getBackground(){let e=this.pool.find(((e,t)=>!!t&&!t.isActive()));return e?(e.removeFromParent(),e.setVisible(!0),e.restore()):(e=new a.default,this.pool.put(e)),e}}t.default=n},133:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=s(601);class n extends r.default.Sprite{constructor(){super(),this.HP=1,this.power=1,this.speed_x=0,this.speed_y=2e3,this.active=!0,this.initWithSpriteFrameName("bullet1.png")}isActive(){return this.active}update(e){if(this.active){const t=this.getPosition();t.x+=this.speed_x*e,t.y+=this.speed_y*e,this.setPosition(t),(this.HP<=0||t.y>=a.WIN_HEIGHT||t.y<=0)&&this.destroy()}}destroy(){this.active=!1,this.setVisible(!1)}hurt(){this.HP-=1}collideRect(e){const t=this.getContentSize();return r.default.rect(e.x-t.width/2,e.y-t.height/2,t.width,t.height)}restore(){this.active=!0,this.HP=1}}t.default=n},315:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(133));class n extends r.default.Class{constructor(){super(...arguments),this.pool=new r.default.SimplePool}static getInstance(){return this.instance||(this.instance=new this),this.instance}getButtle(){let e=this.pool.find(((e,t)=>!!t&&!t.isActive()));return e?(e.removeFromParent(),e.restore(),e.setVisible(!0)):(e=new a.default,this.pool.put(e)),e}}t.default=n},986:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=s(601);class n extends r.default.Sprite{constructor(e){super(),this.HP=0,this.speed=0,this.active=!0,this.initWithSpriteFrameName(e),this.restore()}isActive(){return this.active}restore(){this.active=!0,this.setVisible(!0),this.speed=200*Math.random(),this.speed=this.speed<100?100:this.speed,this.setPosition(Math.random()*a.WIN_WIDTH,a.WIN_HEIGHT)}update(e){if(this.active){const t=this.getPosition();t.y-=this.speed*e,this.setPosition(t),t.y<0&&this.disappear(),this.HP<=0&&this.destroy()}}destroy(){this.active=!1,this.setVisible(!1)}disappear(){this.active=!1,this.setVisible(!1)}hurt(){this.HP-=1}collideRect(e){const t=this.getContentSize();return r.default.rect(e.x-t.width/2,e.y-t.height/4,t.width,t.height/2+20)}}t.default=n},890:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(467)),n=i(s(64)),o=i(s(937));class u extends r.default.Class{constructor(){super(...arguments),this.pool=new r.default.SimplePool}static getInstance(){return this.instance||(this.instance=new this),this.instance}create(){let e;const t=100*Math.random();e=t<80?a.default:t<95?n.default:o.default;let s=this.pool.find(((t,s)=>!!s&&s instanceof e&&!s.isActive()));return s?(s.removeFromParent(),s.restore()):(s=new e,this.pool.put(s)),s}}t.default=u},937:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(986)),n=s(732);class o extends a.default{constructor(){super("enemy2_fly_1.png");const e=r.default.spriteFrameCache.getSpriteFrame("enemy2_fly_1.png"),t=r.default.spriteFrameCache.getSpriteFrame("enemy2_fly_2.png"),s=[];s.push(e),s.push(t);const i=r.default.Animation.create(s,.1),a=r.default.Animate.create(i);this.runAction(r.default.RepeatForever.create(a))}restore(){super.restore(),this.HP=20}destroy(){const e=r.default.Sprite.create(),t=this.getParent();t.addChild(e),e.setPosition(this.getPosition());const s=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_1.png"),i=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_2.png"),a=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_3.png"),o=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_4.png"),u=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_5.png"),d=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_6.png"),l=r.default.spriteFrameCache.getSpriteFrame("enemy2_blowup_7.png"),c=[];c.push(s),c.push(i),c.push(a),c.push(o),c.push(u),c.push(d),c.push(l);const h=r.default.Animation.create(c,.1),p=r.default.Animate.create(h);e.runAction(p),e.scheduleOnce((()=>{t.removeChild(e)}),.8),r.default.audioEngine.playEffect(n.getResourceName("VID_ENEMYMAXOUT")),super.destroy()}}t.default=o},64:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(986)),n=s(732);class o extends a.default{constructor(){super("enemy3_fly_1.png")}restore(){super.restore(),this.HP=8}destroy(){const e=r.default.Sprite.create(),t=this.getParent();t.addChild(e),e.setPosition(this.getPosition());const s=r.default.spriteFrameCache.getSpriteFrame("enemy3_blowup_1.png"),i=r.default.spriteFrameCache.getSpriteFrame("enemy3_blowup_2.png"),a=r.default.spriteFrameCache.getSpriteFrame("enemy3_blowup_3.png"),o=r.default.spriteFrameCache.getSpriteFrame("enemy3_blowup_4.png"),u=[];u.push(s),u.push(i),u.push(a),u.push(o);const d=r.default.Animation.create(u,.1),l=r.default.Animate.create(d);e.runAction(l),e.scheduleOnce((()=>{t.removeChild(e)}),.5),r.default.audioEngine.playEffect(n.getResourceName("VID_ENEMYMIDOUT")),super.destroy()}}t.default=o},467:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(986)),n=s(732);class o extends a.default{constructor(){super("enemy1_fly_1.png")}restore(){super.restore(),this.HP=1}destroy(){const e=r.default.Sprite.create(),t=this.getParent();t.addChild(e),e.setPosition(this.getPosition());const s=r.default.spriteFrameCache.getSpriteFrame("enemy1_blowup_1.png"),i=r.default.spriteFrameCache.getSpriteFrame("enemy1_blowup_2.png"),a=r.default.spriteFrameCache.getSpriteFrame("enemy1_blowup_3.png"),o=r.default.spriteFrameCache.getSpriteFrame("enemy1_blowup_4.png"),u=[];u.push(s),u.push(i),u.push(a),u.push(o);const d=r.default.Animation.create(u,.1),l=r.default.Animate.create(d);e.runAction(l),e.scheduleOnce((()=>{t.removeChild(e)}),.5),r.default.audioEngine.playEffect(n.getResourceName("VID_ENEMYMINOUT")),super.destroy()}}t.default=o},874:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(778)),n=s(732),o=i(s(396)),u=i(s(890)),d=i(s(9)),l=s(601);class c extends r.default.Layer{constructor(){super(),this.keys={},this.enemys=[],this.player=new a.default,this.backgroundHeight=0,this.isBackgroundReload=!1,this.addChild(this.player,1),this.scheduleUpdate(),this.initBackground(),this.schedule(this.createEnemy,1),r.default.audioEngine.playMusic(n.getResourceName("VID_GAMEMUSIC"),!0),r.default.eventManager.addListener({event:r.default.EventListener.TOUCH_ALL_AT_ONCE,onTouchesMoved:this.onTouchesMoved.bind(this)},this.player)}initBackground(){this.background=o.default.getInstance().getBackground(),this.addChild(this.background),this.backgroundHeight=this.background?.getContentSize().height,this.moveBackground(),this.schedule(this.moveBackground,1)}moveBackground(){const e=r.default.director.getWinSize();this.background?.runAction(r.default.MoveBy.create(1,r.default.p(0,-16))),this.backgroundHeight-=16,this.backgroundHeight<=e.height&&(this.isBackgroundReload||(this.backgroundRe=o.default.getInstance().getBackground(),this.addChild(this.backgroundRe),this.backgroundRe?.setPosition(0,e.height),this.isBackgroundReload=!0),this.backgroundRe?.runAction(r.default.MoveBy.create(1,r.default.p(0,-16)))),this.backgroundHeight<=0&&(this.backgroundHeight=this.background?.getContentSize().height,this.background?.destroy(),this.background=this.backgroundRe,this.backgroundRe=void 0,this.isBackgroundReload=!1)}onTouchesMoved(e){this.processEvent(e[0])}onMouseDragged(e){this.processEvent(e)}processEvent(e){if(this.player?.isActive()){const t=e.getDelta();let s=this.player?.getPosition();s=r.default.pAdd(s,t),s=r.default.pClamp(s,r.default.p(0,0),r.default.p(l.WIN_WIDTH,l.WIN_HEIGHT)),this.player.setPosition(s)}}onKeyDown(e){this.keys[e]=!0}onKeyUp(e){this.keys[e]=!1}isLeft(){return this.keys[37]}isUp(){return this.keys[38]}isRight(){return this.keys[39]}isDown(){return this.keys[40]}update(e){if(this.player&&this.player.isActive()){const t=this.player.getPosition();this.isLeft()&&(t.x-=e*this.speed),this.isUp()&&(t.y+=e*this.speed),this.isRight()&&(t.x+=e*this.speed),this.isDown()&&(t.y-=e*this.speed),t.x=Math.max(0,t.x),t.x=Math.min(l.WIN_WIDTH,t.x),t.y=Math.max(0,t.y),t.y=Math.min(l.WIN_HEIGHT,t.y),this.player.setPosition(t),this.player.isOver()&&(this.player.destroy(),this.scheduleOnce((()=>{const e=new d.default;r.default.director.runScene(e)}),.6)),this.bullet&&this.bullet.isActive()||(this.bullet=this.player.shoot(),this.addChild(this.bullet,3)),this.bullet?.update(e),this.updateEnemys(e),this.checkIsCollide()}}updateEnemys(e){let t,s,i;for(t=0,s=this.enemys.length;t<s;t+=1)i=this.enemys[t],i&&i.isActive()&&i.update(e)}createEnemy(){const e=u.default.getInstance().create(),t=this.enemys.length;this.addChild(e,3),void 0===e.eID&&(this.enemys.push(e),e.eID=t)}checkIsCollide(){let e,t,s;if(this.bullet&&this.bullet.isActive())for(e=0,t=this.enemys.length;e<t;e+=1)s=this.enemys[e],s&&s.isActive()&&this.collide(this.bullet,s)&&(s.hurt(),this.bullet.hurt());if(this.player&&this.player.isActive())for(e=0,t=this.enemys.length;e<t;e+=1)s=this.enemys[e],s&&s.isActive()&&this.collide(this.player,s)&&(s.hurt(),this.player.hurt())}collide(e,t){const s=e.getPosition(),i=t.getPosition();if(Math.abs(s.x-i.x)>60||Math.abs(s.y-i.y)>60)return!1;const a=e.collideRect(s),n=t.collideRect(i);return r.default.rectIntersectsRect(a,n)}}t.default=c},9:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=s(601);class n extends r.default.Scene{constructor(){super();const e=r.default.LabelTTF.create("Game Over!","Verdana",48),t=r.default.LayerColor.create();t.addChild(e),t.setColor({r:0,g:0,b:0}),e.setPosition(a.WIN_WIDTH/2,a.WIN_HEIGHT/2),this.addChild(t)}}t.default=n},444:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(874));class n extends r.default.Scene{constructor(){super(),this.addChild(new a.default)}}t.default=n},430:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198));class a extends r.default.Sprite{constructor(){super();const e=["loading0.png","loading1.png","loading2.png","loading3.png"].map((e=>r.default.spriteFrameCache.getSpriteFrame(e))),t=r.default.Animation.create(e,.36);this.animate=r.default.Animate.create(t)}play(){this.animate&&this.runAction(r.default.RepeatForever.create(this.animate))}}t.default=a},778:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(315)),n=s(601),o=s(732);class u extends r.default.Sprite{constructor(){super(),this.HP=1,this.active=!0,this.speed=400,this.initWithSpriteFrameName("hero_fly_1.png"),this.setPosition(r.default.p(n.WIN_WIDTH/2,64));const e=r.default.spriteFrameCache.getSpriteFrame("hero_fly_1.png"),t=r.default.spriteFrameCache.getSpriteFrame("hero_fly_2.png"),s=[];s.push(e),s.push(t);const i=r.default.Animation.create(s,.1),a=r.default.Animate.create(i);this.runAction(r.default.RepeatForever.create(a))}shoot(){const e=this.getPosition(),t=this.getContentSize(),s=a.default.getInstance().getButtle();return s.setPosition(e.x,e.y+t.height/2),r.default.audioEngine.playEffect(o.getResourceName("VID_BULLET")),s}destroy(){this.active=!1,this.setVisible(!1);const e=this.getParent(),t=r.default.Sprite.create();t.setPosition(this.getPosition());const s=r.default.spriteFrameCache.getSpriteFrame("hero_blowup_1.png"),i=r.default.spriteFrameCache.getSpriteFrame("hero_blowup_2.png"),a=r.default.spriteFrameCache.getSpriteFrame("hero_blowup_3.png"),n=r.default.spriteFrameCache.getSpriteFrame("hero_blowup_4.png"),u=[];u.push(s),u.push(i),u.push(a),u.push(n);const d=r.default.Animation.create(u,.1),l=r.default.Animate.create(d);e.addChild(t),t.runAction(l),t.scheduleOnce((()=>{e.removeChild(t)}),.5),r.default.audioEngine.playMusic(o.getResourceName("VID_GAMEOVER"),!1)}collideRect(e){const t=this.getContentSize();return r.default.rect(e.x-t.width/2,e.y-t.height/2,t.width,t.height)}isOver(){return this.HP<=0}isActive(){return this.active}hurt(){this.HP-=1}}t.default=u},871:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=s(601),n=i(s(444)),o=i(s(430)),u=s(732);class d extends r.default.Scene{constructor(){super(),r.default.spriteFrameCache.addSpriteFrames(u.getResource("CFG_GAMEARTSHD"),u.getResource("PIC_GAMEARTSHD")),this.listener={event:r.default.EventListener.TOUCH_ALL_AT_ONCE,onTouchesEnded:this.onTouchesEnded.bind(this)};const e=r.default.LabelTTF.create("Aircraft","Verdana",48),t=r.default.LayerColor.create();t.addChild(e),t.setColor({r:0,g:0,b:0}),e.setPosition(a.WIN_WIDTH/2,a.WIN_HEIGHT/2);const s=new o.default;t.addChild(s),s.setPosition(a.WIN_WIDTH/2,a.WIN_HEIGHT/2-100),s.play(),this.addChild(t)}onEnter(){super.onEnter(),this.listener&&r.default.eventManager.addListener(this.listener,this)}onTouchesEnded(){const e=new n.default;r.default.director.runScene(r.default.TransitionSlideInB.create(1.2,e))}onExit(){super.onEnter(),r.default.eventManager.removeListener(this.listener)}}t.default=d},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WIN_HEIGHT=t.WIN_WIDTH=void 0;const{clientWidth:s,clientHeight:i}=document.documentElement;t.WIN_WIDTH=Math.min(s,640),t.WIN_HEIGHT=i},607:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(198)),a=i(s(871)),n=s(732),o=s(601),u=document.querySelector("#game-canvas");u&&(u.width=o.WIN_WIDTH,u.height=o.WIN_HEIGHT),r.default.game.onStart=()=>{r.default.LoaderScene.preload(Object.values(n.resources),(()=>{r.default.director.runScene(new a.default)}),this)},r.default.game.run({debugMode:1,frameRate:60,id:"game-canvas",renderMode:2,jsList:[]})},732:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceName=t.getResource=t.resources=void 0;const r=i(s(809)),a=i(s(825)),n=i(s(117)),o=i(s(420)),u=i(s(977)),d=i(s(971)),l=i(s(521)),c=i(s(135));t.resources={PIC_GAMEARTSHD:r.default,VID_BULLET:a.default,VID_GAMEMUSIC:n.default,VID_GAMEOVER:o.default,VID_ENEMYMINOUT:u.default,VID_ENEMYMIDOUT:d.default,VID_ENEMYMAXOUT:l.default,CFG_GAMEARTSHD:c.default},t.getResource=e=>{const s=t.resources[e];if(!s)throw new TypeError("not found resource name!");return s},t.getResourceName=e=>{const s=t.resources[e].split("/").pop();if(!s)throw new TypeError("not found resource name!");return s}},825:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"bullet.59695f54.mp3"},977:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"enemy1_down.97e2bc22.mp3"},521:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"enemy2_out.2c6a51d9.mp3"},971:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"enemy3_down.69f03da5.mp3"},135:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"gameArts-hd.85b5593b.plist"},809:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"gameArts-hd.7ba37582.png"},117:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"game_music.53a9f7bb.mp3"},420:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const i=s.p+"game_over.2f0c815a.mp3"},198:e=>{e.exports=cc}},t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="https://wuchu.github.io/aircraft/",s(607)})();